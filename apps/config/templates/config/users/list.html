{% extends 'config/base_config.html' %} {% load crispy_forms_tags %} {% block config_title %}Usuários{% endblock %} {% block config_header %} <i class="fas fa-users me-2"></i>Gerenciar Usuários {% endblock %} {% block config_content %} <!-- Header da Página --> <div class="dashboard-section"> <div class="d-flex justify-content-between align-items-center mb-4"> <div> <h1 class="text-sans text-body mb-2">Gerenciar Usuários</h1> <p class="text-secondary text-body mb-0">Visualize e gerencie todos os usuários do sistema</p> </div> <div class="d-flex gap-2"> <a href="{% url 'config:user_create' %}" class="btn-primary btn-enhanced"> <i class="fas fa-plus me-2"></i>Novo Usuário </a> </div> </div> </div> <!-- Estatísticas Rápidas --> <div class="dashboard-section"> <div class="row"> <div class="col-lg-3 col-md-6 mb-3"> <div class="dashboard-stat-card"> <div class="d-flex align-items-center justify-content-between"> <div> <div class="dashboard-stat-label">Total</div> <div class="dashboard-stat-value text-primary">{{ total_users|default:0 }}</div> </div> <div class="text-primary"> <i class="fas fa-users fa-2x"></i> </div> </div> </div> </div> <div class="col-lg-3 col-md-6 mb-3"> <div class="dashboard-stat-card"> <div class="d-flex align-items-center justify-content-between"> <div> <div class="dashboard-stat-label">Ativos</div> <div class="dashboard-stat-value text-success">{{ active_users|default:0 }}</div> </div> <div class="text-success"> <i class="fas fa-check-circle fa-2x"></i> </div> </div> </div> </div> <div class="col-lg-3 col-md-6 mb-3"> <div class="dashboard-stat-card"> <div class="d-flex align-items-center justify-content-between"> <div> <div class="dashboard-stat-label">Staff</div> <div class="dashboard-stat-value text-warning">{{ staff_users|default:0 }}</div> </div> <div class="text-warning"> <i class="fas fa-user-tie fa-2x"></i> </div> </div> </div> </div> <div class="col-lg-3 col-md-6 mb-3"> <div class="dashboard-stat-card"> <div class="d-flex align-items-center justify-content-between"> <div> <div class="dashboard-stat-label">Admins</div> <div class="dashboard-stat-value text-danger">{{ super_users|default:0 }}</div> </div> <div class="text-danger"> <i class="fas fa-crown fa-2x"></i> </div> </div> </div> </div> </div> </div> <!-- Busca e Filtros --> <div class="dashboard-section"> <div class="card-django-django border-0 shadow-sm"> <div class="card-django-header-comfortable border-0 shadow-sm"> <h5 class="mb-0 text-sans text-body"> <i class="fas fa-search me-2 text-django-green"></i>Buscar Usuários </h5> </div> <div class="card-django-body-comfortable border-0 shadow-sm"> <form method="get" class="row g-3"> <div class="col-md-8"> <div class="search-form"> <div class="input-group"> <span class="input-group-text"> <i class="fas fa-search"></i> </span> <input type="text" name="query" class="form-control search-input-enhanced" placeholder="Buscar por nome, email ou username..." value="{{ request.GET.query|default:'' }}"> {% if request.GET.query %} <a href="{% url 'config:user_list' %}" class="btn-outline-secondary"> <i class="fas fa-times"></i> </a> {% endif %} </div> </div> </div> <div class="col-md-4"> <div class="d-flex gap-2"> <button type="submit" class="btn-primary btn-enhanced"> <i class="fas fa-search me-1"></i>Buscar </button> <a href="{% url 'config:user_list' %}" class="btn-outline-secondary btn-enhanced"> <i class="fas fa-undo me-1"></i>Limpar </a> </div> </div> </form> </div> </div> </div> <!-- Lista de Usuários --> <div class="dashboard-section"> {% if users %} <div class="card-django-django border-0 shadow-sm"> <div class="card-django-header-comfortable border-0 shadow-sm"> <div class="d-flex justify-content-between align-items-center"> <h5 class="mb-0 text-sans text-body"> <i class="fas fa-users me-2 text-django-green"></i> Usuários <span class="badge bg-secondary ms-2">{{ users|length }}</span> </h5> {% if request.GET.query %} <small class="text-secondary"> Resultados para: "{{ request.GET.query }}" </small> {% endif %} </div> </div> <div class="card-django-body-comfortable p-0 border-0 shadow-sm"> <div class="table-responsive"> <table class="table-hover mb-0"> <thead class="table-light"> <tr> <th class="border-0 ps-4">Usuário</th> <th class="border-0">Status</th> <th class="border-0">Tipo</th> <th class="border-0">Último Acesso</th> <th class="border-0 text-center">Ações</th> </tr> </thead> <tbody> {% for user in users %} <tr> <td class="ps-4"> <div class="d-flex align-items-center"> <div class="flex-shrink-0"> {% if user.profile_picture %} <img src="{{ user.profile_picture.url }}" class="rounded-circle" width="40" height="40" alt="{{ user.get_full_name|default:user.username }}"> {% else %} <div class="bg-django-green rounded-circle d-flex align-items-center justify-content-center text-white" style="width: 40px; height: 40px;"> <span class="fw-bold">{{ user.first_name.0|default:user.username.0|upper }}</span> </div> {% endif %} </div> <div class="ms-3"> <div class="fw-semibold text-body">{{ user.get_full_name|default:user.username }}</div> <div class="text-secondary small">{{ user.email }}</div> <div class="text-secondary small">@{{ user.username }}</div> </div> </div> </td> <td> {% if user.is_active %} <span class="badge bg-success"> <i class="fas fa-check-circle me-1"></i>Ativo </span> {% else %} <span class="badge bg-danger"> <i class="fas fa-times-circle me-1"></i>Inativo </span> {% endif %} </td> <td> {% if user.is_superuser %} <span class="badge bg-danger"> <i class="fas fa-crown me-1"></i>Superusuário </span> {% elif user.is_staff %} <span class="badge bg-warning text-dark"> <i class="fas fa-user-tie me-1"></i>Staff </span> {% else %} <span class="badge bg-secondary"> <i class="fas fa-user me-1"></i>Usuário </span> {% endif %} </td> <td> {% if user.last_login %} <div class="text-body small"> <i class="fas fa-clock me-1"></i>{{ user.last_login|timesince }} atrás </div> <div class="text-secondary smaller">{{ user.last_login|date:"d/m/Y H:i" }}</div> {% else %} <span class="text-secondary"> <i class="fas fa-minus me-1"></i>Nunca </span> {% endif %} </td> <td class="text-center"> <div class="btn-group-sm"> <a href="{% url 'config:user_detail' user.slug %}" class="btn-outline-primary btn-enhanced" title="Visualizar"> <i class="fas fa-eye"></i> </a> <a href="{% url 'config:user_update' user.slug %}" class="btn-outline-secondary btn-enhanced" title="Editar"> <i class="fas fa-edit"></i> </a> {% if user != request.user %} <a href="{% url 'config:user_delete' user.slug %}" class="btn-outline-danger btn-enhanced" title="Deletar"> <i class="fas fa-trash"></i> </a> {% endif %} </div> </td> </tr> {% endfor %} </tbody> </table> </div> </div> </div> <!-- Paginação --> {% if page_obj.has_other_pages %} <div class="d-flex justify-content-between align-items-center mt-4"> <div class="text-secondary"> Mostrando {{ page_obj.start_index }} a {{ page_obj.end_index }} de {{ page_obj.paginator.count }} usuários </div> <nav aria-label="Navegação de páginas"> <ul class="pagination mb-0"> {% if page_obj.has_previous %} <li class="page-item"> <a class="page-link" href="?page=1{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"> <i class="fas fa-angle-double-left"></i> </a> </li> <li class="page-item"> <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"> <i class="fas fa-angle-left"></i> </a> </li> {% endif %} {% for num in page_obj.paginator.page_range %} {% if page_obj.number == num %} <li class="page-item active"> <span class="page-link">{{ num }}</span> </li> {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} <li class="page-item"> <a class="page-link" href="?page={{ num }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}">{{ num }}</a> </li> {% endif %} {% endfor %} {% if page_obj.has_next %} <li class="page-item"> <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"> <i class="fas fa-angle-right"></i> </a> </li> <li class="page-item"> <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.query %}&query={{ request.GET.query }}{% endif %}"> <i class="fas fa-angle-double-right"></i> </a> </li> {% endif %} </ul> </nav> </div> {% endif %} {% else %} <!-- Estado Vazio --> <div class="card-django-django border-0 shadow-sm"> <div class="card-django-body profile-card-body text-center border-0 shadow-sm"> <div class="py-5"> <i class="fas fa-users fa-4x text-secondary opacity-50 mb-4"></i> <h4 class="text-body mb-3 text-sans text-body">Nenhum usuário encontrado</h4> {% if request.GET.query %} <p class="text-secondary mb-4 text-body"> Não encontramos usuários para "<strong>{{ request.GET.query }}</strong>". Tente ajustar a busca ou criar um novo usuário. </p> <div class="d-flex gap-2 justify-content-center"> <a href="{% url 'config:user_list' %}" class="btn-outline-secondary btn-enhanced"> <i class="fas fa-undo me-1"></i>Limpar Busca </a> <a href="{% url 'config:user_create' %}" class="btn-primary btn-enhanced"> <i class="fas fa-plus me-1"></i>Criar Usuário </a> </div> {% else %} <p class="text-secondary mb-4 text-body"> Ainda não há usuários cadastrados no sistema. Comece criando o primeiro usuário. </p> <a href="{% url 'config:user_create' %}" class="btn-primary btn-enhanced"> <i class="fas fa-plus me-2"></i>Criar Primeiro Usuário </a> {% endif %} </div> </div> </div> {% endif %} </div> {% endblock %} 